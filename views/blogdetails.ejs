<style>
  .blogdetails-container {
    display: flex;
    gap: 1.5rem;
    flex-wrap: wrap; /* make it wrap on smaller screens */
  }

  .left-card,
  .right-card {
    flex: 1 1 100%; /* take full width on small screens */
  }

  .left-card img,
  .right-card img {
    width: 100%;
    height: auto;
    border-radius: 0.5rem;
    margin-bottom: 1rem;
    object-fit: cover;
  }

  .btnclass {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    justify-content: flex-start; /* âœ… shifted to left */
    margin-top: 1.5rem;
  }

  .btnclass form {
    margin: 0 !important;
  }

  .badge {
    background-color: white !important;
  }

  .comments-section .card {
    margin-bottom: 1rem;
    padding: 1rem;
  }

  @media (min-width: 768px) {
    .left-card {
      flex: 2; /* larger portion */
    }
    .right-card {
      flex: 1; /* smaller portion */
    }
  }
</style>

<%-layout("./layouts/boilerplate.ejs")%>

<div
  class="badge text-wrap fs-1 text-center mt-1 mb-5"
  style="width: 100%; color: black !important"
>
  <h1 class="page-title"><%= blogdata.title %></h1>
</div>
<hr />

<!-- Blog Details -->
<div class="container blogdetails-container mt-3 mb-3">
  <div class="card left-card border border-end-0 p-3">
    <img src="<%= blogdata.ImageUrl1  %>" alt="blog_main_img" />
    <h3 class="mt-3"><%= blogdata.title %></h3>
    <p class="mt-3 lh-4"><%= blogdata.about %></p>
  </div>

  <div class="card right-card p-3">
    <img src="<%= blogdata.ImageUrl1 %>" alt="monument_img" />
    <img src="<%= blogdata.ImageUrl2 %>" alt="monument_img" />
    <img src="<%= blogdata.ImageUrl3  %>" alt="monument_img" />
  </div>
</div>

<!-- Buttons (shifted left) -->
<div class="btnclass">
  <form action="/user/home">
    <button class="btn btn-primary">Back</button>
  </form>

  <% if(blogdata.createdBy.username===user.username){%>
  <form action="/blog/update/<%= blogdata._id  %>">
    <button class="btn btn-warning">Update Blog</button>
  </form>
  <form action="/blog/delete/<%= blogdata._id  %>?_method=DELETE" method="post">
    <button class="btn btn-danger">Delete Blog</button>
  </form>
  <%}%>
</div>

<hr />

<!-- Add Comment -->
<div class="container mb-5">
  <form
    action="/add-comments/<%= user._id %>/<%= blogdata._id  %>"
    method="post"
  >
    <div class="row">
      <h3>Leave Your Comments</h3>
      <div class="col-12 col-md-6">
        <textarea
          class="form-control"
          placeholder="Leave a comment here"
          id="comment"
          style="height: 100px"
          required
          name="comment"
        ></textarea>
      </div>
    </div>
    <button class="btn btn-primary mt-4" type="submit">Add Comment</button>
  </form>
</div>

<hr />

<!-- Show Comments -->
<h3>Comments</h3>
<div class="container m-3 comments-section">
  <div class="row">
    <% for(thisblogcomment of blogComments.comments){%>
    <div class="card col-12 col-md-4">
      <p>
        <b>@<%= thisblogcomment.commnetedBy.username%></b>
      </p>
      <p><%= thisblogcomment.comment %></p>

      <% if(thisblogcomment.commnetedBy.username===user.username){%>
      <form
        action="/commentDelete/<%= thisblogcomment._id %>/<%= blogdata._id  %>/?_method=DELETE"
        method="post"
        class="mt-3"
      >
        <button class="btn btn-sm btn-danger">Delete Your Comment</button>
      </form>
      <% } %>
    </div>
    <%} %>
  </div>
</div>
